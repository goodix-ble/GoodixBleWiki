<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>01.SPI-QSPI协议专题(1) - 基础协议特征介绍 &mdash; Goodix BLE Start Guide v1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5a3fd9cb"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=beaddf03"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="02.SPI-QSPI协议专题(2) - 构建GR55xx (Q)SPI高速传输接口的基础" href="02_SPI-QSPI%E5%8D%8F%E8%AE%AE%E4%B8%93%E9%A2%98%282%29%20-%20%E6%9E%84%E5%BB%BAGR55xx%20%28Q%29SPI%E9%AB%98%E9%80%9F%E4%BC%A0%E8%BE%93%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9F%BA%E7%A1%80.html" />
    <link rel="prev" title="SPI与QSPI" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Goodix BLE Start Guide
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">Menu List</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../%E5%BC%80%E5%8F%91%E5%90%91%E5%AF%BC/index.html">开发向导</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/index.html">技术方案</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">应用笔记</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">SPI与QSPI</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">01.SPI-QSPI协议专题(1) - 基础协议特征介绍</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#spi">1. SPI协议</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qspi">2.QSPI 协议</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">附录</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="02_SPI-QSPI%E5%8D%8F%E8%AE%AE%E4%B8%93%E9%A2%98%282%29%20-%20%E6%9E%84%E5%BB%BAGR55xx%20%28Q%29SPI%E9%AB%98%E9%80%9F%E4%BC%A0%E8%BE%93%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9F%BA%E7%A1%80.html">02.SPI-QSPI协议专题(2) - 构建GR55xx (Q)SPI高速传输接口的基础</a></li>
<li class="toctree-l3"><a class="reference internal" href="03_SPI-QSPI%E5%8D%8F%E8%AE%AE%E4%B8%93%E9%A2%98%283%29%20-%20GR552x%E8%8A%AF%E7%89%87DMA%E5%8F%8AQSPI%E6%A8%A1%E5%9D%97%E5%8A%9F%E8%83%BD%E7%89%B9%E5%BE%81.html">03.SPI-QSPI协议专题(3) - GR552x芯片DMA及QSPI模块功能特征</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_SPI-QSPI%E5%8D%8F%E8%AE%AE%E4%B8%93%E9%A2%98%284%29%20-%20%E8%89%B2%E5%BD%A9%E6%A0%BC%E5%BC%8F%E5%8F%8A%E5%B8%B8%E8%A7%81%E5%BC%82%E5%B8%B8.html">04.SPI-QSPI协议专题(4) - 色彩格式及常见异常</a></li>
<li class="toctree-l3"><a class="reference internal" href="AN01_QSPI%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C%E7%AC%94%E8%AE%B0.html">QSPI使用经验笔记</a></li>
<li class="toctree-l3"><a class="reference internal" href="AN02_SPI%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C%E7%AC%94%E8%AE%B0.html">SPI使用经验笔记</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../DMA/index.html">DMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../BLE/index.html">BLE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/index.html">常见问题</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Goodix BLE Start Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">应用笔记</a></li>
          <li class="breadcrumb-item"><a href="index.html">SPI与QSPI</a></li>
      <li class="breadcrumb-item active">01.SPI-QSPI协议专题(1) - 基础协议特征介绍</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/应用笔记/SPI与QSPI/01_SPI-QSPI协议专题(1) - 基础协议特征介绍.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="spi-qspi-1">
<h1>01.SPI-QSPI协议专题(1) - 基础协议特征介绍<a class="headerlink" href="#spi-qspi-1" title="Link to this heading"></a></h1>
<p>[TOC]</p>
<blockquote>
<div><p>前言</p>
</div></blockquote>
<ul class="simple">
<li><p>SPI/QSPI 协议接口是显示类、存储类、以及一些传感器设备的数据通信接口。</p></li>
<li><p>通过这个技术专题, 详细讲解 GR55xx 系列芯片 SPI/QSPI 协议、芯片模块的设计特点、软件接口的用法以及构建高效率的应用接口, 帮助用户快速的理解和发挥 SPI/QSPI 的高吞吐性能。</p></li>
<li><p>系列文章一般情况适用于 GR551x、GR5525、GR5526； 如果只适用于特定芯片, 会进行标注.</p></li>
</ul>
<section id="spi">
<h2>1. SPI协议<a class="headerlink" href="#spi" title="Link to this heading"></a></h2>
<p>SPI是一种同步串行接口技术,是一种高速、全双工、同步通信总线,在芯片中只占用四根管脚用来控制及数据传输,广泛用于EEPROM、Flash、RTC（实时时钟）、ADC（数模转换器）、DSP（数字信号处理器）以及数字信号解码器上</p>
<section id="id1">
<h3>1.1 引脚信号<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>SPI 协议定义了4根功能信号引脚:</p>
<ul class="simple">
<li><p>SCK(Serial Clock)：SCK是串行时钟线,作用是Master向Slave传输时钟信号</p></li>
<li><p>MOSI(Master Out Slave in)：在SPI Master上也被称为Tx-channel,作用是SPI主机给SPI从机发送数据</p></li>
<li><p>CS/SS(Chip Select/Slave Select)：作用是SPI Master选择与哪一个SPI Slave通信,低电平表示从机被选中(低电平有效)</p></li>
<li><p>MISO(Master In Slave Out)：在SPI Master上也被称为Rx-channel,作用是SPI主机接收SPI从机传输过来的数据
<img alt="在这里插入图片描述" src="../../_images/e37d97570f0549ba8381eac2339e972f.png" /></p></li>
</ul>
</section>
<section id="id2">
<h3>1.2 角色<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>SPI 协议中， 存在Master 和 Slave两类角色, 通信采用主从控制方式进行, 传输由Master 负责发起； Slave负责应答. 主从通信的典型的通信拓扑如下图:
<img alt="在这里插入图片描述" src="../../_images/bfb3b5d0532b4100af5d355ace484fc1.png" /></p>
<ul class="simple">
<li><p>SPI协议规定Slave设备的clock由Master通过SCK管脚提供给Slave，Slave本身不能产生或控制clock，没有clock则Slave不能正常工作</p></li>
<li><p>SPI总线在传输数据的同时也传输了时钟信号，所以SPI协议是一种同步（Synchronous）传输协议。Master会根据将要交换的数据产生相应的时钟脉冲，组成时钟信号，时钟信号通过时钟极性(CPOL)和时钟相位(CPHA)控制两个SPI设备何时交换数据以及何时对接收数据进行采样，保证数据在两个设备之间是同步传输的</p></li>
<li><p>SPI总线协议是一种支持全双工的串行通信协议，数据传输时高位在前，低位在后
<img alt="在这里插入图片描述" src="../../_images/3e861a7f190c49849b0239fbf9b43dce.png" /></p></li>
</ul>
</section>
<section id="id3">
<h3>1.3 时钟频率<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<p>SPI 协议是一种由时钟信号驱动的协议, 当时钟频率固定时候, 起工作效率也被固定. 一般情况下, SPI Clock有系统的主频时钟或者外设时钟分频而来. Master / Slave 可能获取的最大工作频率并不相同</p>
<p>下表为 GR55xx 系列芯片SPI/QSPI 时钟频率表
<img alt="在这里插入图片描述" src="../../_images/ce10ad7e5fa04751bbc2146053e685c8.png" /></p>
</section>
<section id="id4">
<h3>1.4 时钟模式<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<p>SPI协议定义了4种时钟模式，这4种模式分别由时钟极性(CPOL，Clock Polarity)和时钟相位(CPHA，Clock Phase)来组合而成.</p>
<ul class="simple">
<li><p>CPOL参数规定了SCK时钟信号空闲状态的电平</p></li>
<li><p>CPHA规定了数据是在SCK时钟的上升沿被采样还是下降沿被采样 (第一个或第二个突变边沿采样)</p></li>
</ul>
<p><img alt="在这里插入图片描述" src="../../_images/a3ac8db7ff0642d9a232c3548cbdd33b.png" />
<img alt="在这里插入图片描述" src="../../_images/189d99c6d23a488fb5eb23b74a2e9abd.png" />
<img alt="在这里插入图片描述" src="../../_images/0d7580f688824da0bbd48e5ffbe8f42d.png" /></p>
</section>
<section id="id5">
<h3>1.5 时序相位<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<p>SPI协议完整的时序构成为 : 指令 、地址、数据。而在一个功能化的时序中, 可以只包含其中的某些部分(地址不能独立存在)</p>
<ul class="simple">
<li><p>典型的读操作时序
<img alt="在这里插入图片描述" src="../../_images/6d47a998a5304049baf3cd5075e0515b.png" /></p></li>
<li><p>典型的写操作时序
<img alt="在这里插入图片描述" src="../../_images/cfd5288db09444a4b9d2357cd17aa12f.png" /></p></li>
</ul>
</section>
<section id="id6">
<h3>1.6 SPI 协议衍生时序<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p>在SPI协议的基础上, 进行 数据I/O 或其他功能线的扩展, 衍生出众多的SPI 族时序.
<img alt="在这里插入图片描述" src="../../_images/95125dfa0da94729b18ab55a0ed1c901.png" /></p>
</section>
</section>
<section id="qspi">
<h2>2.QSPI 协议<a class="headerlink" href="#qspi" title="Link to this heading"></a></h2>
<section id="id7">
<h3>2.1 概述<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<p>QSPI (QuadSPI)时序协议, 以及DSPI(Dual SPI), 基于SPI进行了扩展. 但CSn、Clock功能以及时钟模式、时钟频率等与时序协议与SPI 类似. 依然是同步、串行协议. 但其工作模式发生了些变化.   在DSPI/QSPI 模式下, 数据线不再是全双工模式</p>
</section>
<section id="id8">
<h3>2.2 引脚信号<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<p>QSPI  -  Quad SPI协议, 数据线由 SPI 的 MOSI、MISO扩展为 IO0、IO1、IO2、IO3.</p>
<p>典型的电路接线图:
<img alt="在这里插入图片描述" src="../../_images/967a6367f5804f13abe3c420ff65337a.png" />
常见的Flash 设备同时支持 SPI, Dual SPI, Quad SPI 工作模式, 再不同模式下, IO 具备不同能力.
<img alt="在这里插入图片描述" src="../../_images/2e07e4f34855451ab5d20bb099f4363a.png" /></p>
</section>
<section id="id9">
<h3>2.3 时序相位<a class="headerlink" href="#id9" title="Link to this heading"></a></h3>
<p><img alt="在这里插入图片描述" src="../../_images/2ab29e59e4c34e5bb348a6a49e106468.png" /></p>
<p>标准的QSPI 时序由5个如下相位部分构成</p>
<ul class="simple">
<li><p>指令 : 进行控制行为的定义及识别</p></li>
<li><p>地址 : 拟操作的目标地址</p></li>
<li><p>Mode Bits : 模式位, 一般只存在 Nor Flash 设备中, 用于标注 是否支持SIOO 模式</p></li>
<li><p>Dummy Cycles : 等于Wait Cycles, 等待周期, 给予从设备的数据输出等待时间</p></li>
<li><p>DATA : 数据</p></li>
</ul>
</section>
<section id="id10">
<h3>2.4 指令地址模式<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<p>在QSPI 时序中, 指令地址存在如下几种发送方式:
(注: 下面时序截图参考源自市面QSPI接口 Flash (PUYA)/PSRAM设备的Datasheet)</p>
<ul class="simple">
<li><p>指令单线, 地址单线发送模式.<br /><img alt="在这里插入图片描述" src="../../_images/b9ce9b304ba34b62bfa2b84f3962fae1.png" /></p></li>
<li><p>指令单线, 地址多线发送模式.
<img alt="在这里插入图片描述" src="../../_images/2e20185695b54563add6e02e06301948.png" /></p></li>
<li><p>指令多线, 地址多线发送模式.
<img alt="在这里插入图片描述" src="../../_images/4099222c8e6b4fa69c9137efb3acdcbe.png" /></p></li>
</ul>
<p>当地址通过多线发送时候, 后续相位也一定使用多线模式进行发送</p>
</section>
<section id="qpi">
<h3>2.5 QPI 模式<a class="headerlink" href="#qpi" title="Link to this heading"></a></h3>
<p>在QSPI 模式下, 当所有有效的相位均通过Quad 模式发送时, 将其称为 QPI 模式, QPI模式多见 QSPI PSRAM 设备.
<img alt="在这里插入图片描述" src="../../_images/740c888c44b54048b7b8e22851bbc7a1.png" /></p>
</section>
<section id="sioo">
<h3>2.6 SIOO 模式<a class="headerlink" href="#sioo" title="Link to this heading"></a></h3>
<p>SIOO模式, Sent Instruction Only Once 模式.</p>
<p>常见于Nor Flash 的读命令, 需要Mode Bits 相位支持, 声明此模式后, 只需要在第一次访问时候, 在时序中包含 命令相位部分, 在后续的时序中, 不用再发送.直到 Mode Bits 状态发生变化
<img alt="在这里插入图片描述" src="../../_images/bbe51a46aeea45e4bddbaa841bb8c9ee.png" /></p>
</section>
<section id="id11">
<h3>2.7 效率计算<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<p>DATA Phase 以外的Phase 都算作Overhead.</p>
<p>每次访问效率 = DATA Clock / Total Clock</p>
</section>
</section>
<section id="id12">
<h2>附录<a class="headerlink" href="#id12" title="Link to this heading"></a></h2>
<p><img alt="在这里插入图片描述" src="../../_images/16e854a43b8543ef93668f1a970b09b9.png" /></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="index.html" class="btn btn-neutral float-left" title="SPI与QSPI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="02_SPI-QSPI%E5%8D%8F%E8%AE%AE%E4%B8%93%E9%A2%98%282%29%20-%20%E6%9E%84%E5%BB%BAGR55xx%20%28Q%29SPI%E9%AB%98%E9%80%9F%E4%BC%A0%E8%BE%93%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9F%BA%E7%A1%80.html" class="btn btn-neutral float-right" title="02.SPI-QSPI协议专题(2) - 构建GR55xx (Q)SPI高速传输接口的基础" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2023, Goodix。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>